---
import { Breadcrumbs, OrgDetails } from 'virtual:pf/components'
import reciviData from 'virtual:recivi/data'

import { pageSchema } from '@recivi/pf/content'
import Resume from '@recivi/pf/layouts/Resume.astro'

export async function getStaticPaths() {
  const orgs = reciviData.work
  return orgs.map((org) => ({
    params: { slug: org.slug },
    props: { org },
  }))
}

const { org } = Astro.props

const frontmatter = pageSchema.parse({
  title: `Org: ${org.name}`,
  description: `Know more about my work for ${org.name}.`,
  banRobots: true,
})
---

<Resume {frontmatter}>
  <Breadcrumbs
    slot="primary-header"
    crumbs={[
      { url: { dest: '/', label: 'Home' } },
      { url: { dest: '/resume', label: 'Résumé' } },
      'Orgs',
      org.name,
    ]}
  />

  <OrgDetails {org} />
</Resume>
